# 生命周期

!['lifecycle'](/img/lifecycle.png)

| 生命周期钩子  | 组件状态                                                                                                                   | 最佳实践                                                     |
| ------------- | -------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------ |
| beforeCreate  | 实例初始化之后，this 指向创建的实例，不能访问到 data、computed、watch、methods 上的方法和数据                              | 常用于初始化非响应式变量                                     |
| created       | 实例创建完成，可访问 data、computed、watch、methods 上的方法和数据，未挂载到 DOM，不能访问到$el属性，$ref 属性内容为空数组 | 常用于简单的 ajax 请求，页面的初始化                         |
| beforeMount   | 在挂载开始之前被调用，beforeMount 之前，会找到对应的 template，并编译成 render 函数                                        | –                                                            |
| mounted       | 实例挂载到 DOM 上，此时可以通过 DOM API 获取到 DOM 节点，\$ref 属性可以访问                                                | 常用于获取 VNode 信息和操作，ajax 请求                       |
| beforeupdate  | 响应式数据更新时调用，发生在虚拟 DOM 打补丁之前                                                                            | 适合在更新之前访问现有的 DOM，比如手动移除已添加的事件监听器 |
| updated       | 虚拟 DOM 重新渲染和打补丁之后调用，组件 DOM 已经更新，可执行依赖于 DOM 的操作                                              | 避免在这个钩子函数中操作数据，可能陷入死循环                 |
| beforeDestroy | 实例销毁之前调用。这一步，实例仍然完全可用，this 仍能获取到实例                                                            | 常用于销毁定时器、解绑全局事件、销毁插件对象等操作           |
| destroyed     | 实例销毁后调用，调用后，Vue 实例指示的所有东西都会解绑定，所有的事件监听器会被移除，所有的子实例也会被销毁                 | –                                                            |


## 父子组件的生命周期顺序

父组件beforeCreated -> 父组件created -> 父组件beforeMounted

子组件beforeCreated -> 子组件created -> 子组件beforeMounted -> 子组件mounted -> 父组件mounted